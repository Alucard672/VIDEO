# 内容采集功能使用指南

## 🎯 功能概述

视频自动化处理系统现已集成强大的内容采集功能，支持从多个平台自动采集内容，为视频制作提供丰富的素材来源。

## 🚀 快速开始

### 1. 启动系统

```bash
# 方式一：快速启动（推荐）
python quick_start.py

# 方式二：使用测试工具启动
python run_tests.py

# 方式三：直接启动Web应用
python web_app.py
```

### 2. 访问内容采集管理

启动系统后，在浏览器中访问：
- 主界面：http://localhost:5002
- 内容采集管理：http://localhost:5002/content-fetch

## 📋 功能特性

### ✨ 采集源管理
- **多平台支持**：网易新闻、新浪新闻、搜狐新闻、GitHub趋势、HackerNews等
- **灵活配置**：自定义采集URL、分类、数量限制、采集间隔
- **状态管理**：启用/禁用采集源，实时状态监控
- **测试功能**：一键测试采集源有效性

### 🏷️ 分类管理
- **智能分类**：支持多级分类体系
- **关键词匹配**：基于关键词自动分类内容
- **优先级设置**：设置分类优先级，优化采集效果
- **动态管理**：实时添加、编辑、禁用分类

### 📊 任务管理
- **批量采集**：创建采集任务，批量处理多个采集源
- **进度监控**：实时显示采集进度和状态
- **结果统计**：详细的采集结果统计和分析
- **任务控制**：启动、停止、重启采集任务

## 🛠️ 使用步骤

### 第一步：配置采集源

1. 进入"采集源管理"标签页
2. 点击"添加采集源"按钮
3. 填写采集源信息：
   - **名称**：采集源的显示名称
   - **平台类型**：选择对应的平台
   - **采集URL**：目标网站的URL
   - **描述**：采集源的详细说明
   - **分类**：选择内容分类
   - **采集限制**：单次采集的最大数量
   - **采集间隔**：采集的时间间隔（秒）

### 第二步：管理分类

1. 进入"分类管理"标签页
2. 查看现有分类或添加新分类
3. 设置分类的关键词和优先级
4. 启用/禁用特定分类

### 第三步：创建采集任务

1. 进入"采集任务"标签页
2. 点击"创建采集任务"按钮
3. 配置任务参数：
   - **任务名称**：为任务起一个描述性名称
   - **选择采集源**：勾选要使用的采集源
   - **选择分类**：选择要采集的内容分类
   - **采集数量限制**：设置本次任务的总采集数量

### 第四步：执行和监控

1. 创建任务后，点击"开始"按钮启动任务
2. 在任务列表中实时查看采集进度
3. 查看采集结果和统计信息
4. 必要时可以停止或重启任务

## 📈 监控和统计

### 实时统计
- **采集源总数**：系统中配置的采集源数量
- **启用的采集源**：当前活跃的采集源数量
- **分类总数**：系统中的分类数量
- **运行中任务**：正在执行的采集任务数量

### 可视化图表
- **平台分布图**：显示不同平台的采集源分布
- **分类统计图**：显示各分类的采集源数量
- **采集趋势图**：显示采集活动的时间趋势

## 🔧 高级配置

### 自定义采集源

对于不在预设平台列表中的网站，可以选择"自定义"平台类型，并配置：

```json
{
  "name": "自定义新闻站",
  "platform": "custom",
  "url": "https://example.com/api/news",
  "selectors": {
    "title": ".news-title",
    "content": ".news-content",
    "link": ".news-link"
  }
}
```

### 采集规则配置

在 `content_fetch_config.py` 中可以自定义采集规则：

```python
# 添加新的采集源
config.add_source({
    'name': '新采集源',
    'platform': 'custom',
    'url': 'https://api.example.com/content',
    'category': 'technology',
    'fetch_limit': 50,
    'fetch_interval': 300
})

# 添加新的分类
config.add_category({
    'name': '新分类',
    'keywords': ['关键词1', '关键词2'],
    'priority': 5
})
```

## 🚨 故障排除

### 常见问题

1. **采集源无法访问**
   - 检查网络连接
   - 验证URL是否正确
   - 确认目标网站是否可访问

2. **采集结果为空**
   - 检查采集源配置
   - 验证分类过滤条件
   - 查看错误日志

3. **任务执行失败**
   - 检查采集源状态
   - 验证数据库连接
   - 查看系统资源使用情况

### 日志查看

系统日志位于 `logs/` 目录下：
- `system.log`：系统运行日志
- `fetch.log`：采集任务日志
- `error.log`：错误日志

### 数据库管理

数据库文件位于 `data/video_pipeline.db`，包含以下主要表：
- `fetch_tasks`：采集任务记录
- `content`：采集的内容数据
- `system_logs`：系统日志

## 📞 技术支持

如果遇到问题，可以：

1. 运行系统测试：`python test_system.py`
2. 查看系统状态：`python run_tests.py` 选择选项4
3. 检查日志文件获取详细错误信息
4. 重新初始化数据库：删除 `data/video_pipeline.db` 后重启系统

## 🔄 更新日志

### v2.0.0 (当前版本)
- ✨ 新增内容采集功能
- 🎨 全新的Web界面设计
- 📊 实时监控和统计
- 🔧 灵活的配置管理
- 🚀 一键启动脚本

### 未来计划
- 🤖 AI智能内容筛选
- 🔄 自动化内容处理流程
- 📱 移动端支持
- 🌐 更多平台集成

---

**祝您使用愉快！** 🎉