# 视频自动化系统使用说明

## 系统概述

这是一个全自动的视频内容生成和发布系统，支持从新闻采集到视频制作再到平台发布的完整流程。

## 系统架构

```
video-auto-pipeline/
├── 01_content_fetch/     # 内容采集模块
├── 02_script_gen/        # 脚本生成模块  
├── 03_tts/              # TTS语音合成模块
├── 04_video_edit/       # 视频剪辑模块
├── 05_thumbnail/        # 封面生成模块
├── 06_account_manager/  # 账号管理模块
├── 07_uploader/         # 上传发布模块
├── config.py            # 配置文件
├── run_pipeline.py      # 主运行脚本
└── test_system.py       # 系统测试脚本
```

## 环境设置

### 1. 创建虚拟环境

```bash
# 进入项目目录
cd video-auto-pipeline

# 创建虚拟环境
python3 -m venv venv

# 激活虚拟环境
source venv/bin/activate  # macOS/Linux
# 或
venv\Scripts\activate     # Windows
```

### 2. 安装依赖

```bash
# 使用国内镜像源安装依赖
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/
```

### 3. 配置环境变量

创建 `.env` 文件并配置必要的API密钥：

```bash
# OpenAI API密钥
OPENAI_API_KEY=your_openai_api_key

# 其他平台API密钥
BILIBILI_COOKIE=your_bilibili_cookie
DOUYIN_COOKIE=your_douyin_cookie

# 数据库配置
DATABASE_URL=sqlite:///accounts.db
```

## 使用方法

### 1. 系统测试

首先运行系统测试确保环境正常：

```bash
python test_system.py
```

### 2. 运行完整流程

```bash
python run_pipeline.py
```

### 3. 单独运行模块

```bash
# 内容采集
python -m content_fetch.fetch_news
python -m content_fetch.fetch_videos

# 脚本生成
python -m script_gen.generate_script

# TTS生成
python -m tts.tts_generate

# 视频剪辑
python -m video_edit.edit_merge

# 封面生成
python -m thumbnail.thumbnail_gen

# 账号管理
python -m account_manager.account_db
python -m account_manager.account_monitor

# 上传发布
python -m uploader.upload_bilibili
python -m uploader.upload_douyin
```

## 配置说明

### config.py 主要配置项

- `APIConfig`: API密钥配置
- `DatabaseConfig`: 数据库配置
- `VideoConfig`: 视频处理配置
- `UploadConfig`: 上传平台配置

### 数据目录结构

```
data/
├── videos/          # 原始视频文件
├── audio/           # 音频文件
├── thumbnails/      # 封面图片
├── edited_videos/   # 剪辑后的视频
└── logs/            # 日志文件
```

## 功能模块

### 1. 内容采集 (01_content_fetch)
- 网易新闻采集
- 视频素材下载
- 热点话题分析

### 2. 脚本生成 (02_script_gen)
- 基于新闻生成视频脚本
- 多种风格支持（客观、幽默、严肃等）
- AI智能优化

### 3. TTS语音合成 (03_tts)
- 支持多种语音风格
- 高质量语音输出
- 批量处理能力

### 4. 视频剪辑 (04_video_edit)
- 自动视频剪辑
- 字幕添加
- 转场效果

### 5. 封面生成 (05_thumbnail)
- 智能封面设计
- 文字叠加
- 风格化处理

### 6. 账号管理 (06_account_manager)
- 多平台账号管理
- 登录状态维护
- 发布频率控制

### 7. 上传发布 (07_uploader)
- 哔哩哔哩自动上传
- 抖音自动发布
- 发布状态监控

## 注意事项

1. **API密钥安全**: 请妥善保管API密钥，不要提交到代码仓库
2. **网络环境**: 建议使用稳定的网络连接，特别是下载视频素材时
3. **存储空间**: 确保有足够的磁盘空间存储视频文件
4. **平台规则**: 遵守各平台的发布规则和频率限制
5. **内容质量**: 建议人工审核生成的内容，确保质量

## 故障排除

### 常见问题

1. **依赖安装失败**
   - 使用国内镜像源
   - 检查Python版本兼容性

2. **模块导入错误**
   - 确保在虚拟环境中运行
   - 检查Python路径设置

3. **API调用失败**
   - 检查API密钥是否正确
   - 确认网络连接正常

4. **视频处理错误**
   - 检查ffmpeg是否正确安装
   - 确认视频文件格式支持

### 日志查看

系统运行日志保存在 `logs/` 目录下，可以通过查看日志文件来诊断问题。

## 更新和维护

定期更新依赖包：

```bash
pip install --upgrade -r requirements.txt
```

## 技术支持

如遇到问题，请检查：
1. 系统测试结果
2. 日志文件
3. 配置文件设置
4. 网络连接状态

---

**注意**: 本系统仅供学习和研究使用，请遵守相关法律法规和平台规则。 